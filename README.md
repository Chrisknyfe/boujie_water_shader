# Boujie Water Shader
This is a high quality water shader for Godot Engine 4.1+, plus tools
to build your own infinite ocean.

Tested with: Godot_v4.1.1-stable_win64


# How it works

## Ocean node
The plane on which water is simulated is generated during runtime.
Several meshes are generated using the SurfaceTool class, giving you multiple
levels of detail (LODs) which use fewer polygons the further they are
from the center. Finally a "far plane" is generated around the meshes,
stretching to the horizon.

## The Water Shader (water.gdshader)
A vertex shader is applied to the mesh which moves the vertices up and down
every frame. The movement consists of the average of multiple Gerstner Waves 
each with slightly different values.

The water shader has many adjustable features:
 * Specular, Roughness, and Metallic 
 * Wavy albedo texture
 * Refraction
 * Fresnel
 * [Snell's window](https://en.wikipedia.org/wiki/Snell%27s_window)
 * Sea foam texture modulated by Gerstner Waves
 * Shore foam around solid objects in the water
 * Depth fog
 * Distance fade
 * Fade out features with distance, such as vertex waves and foam

## CameraFollower3D node
The water plane now follows the camera around, giving the illusion of an
infinite body of water. This works with the water shader, which calculates
wave heights based on global position, not local position.

This node can independently copy the X, Y and Z coordinate from the camera to
the target. It can also snap the target's position to multiples of a given unit
size.

## Credits
 * Original water shader was made by Tom Langwaldt (MrMinimal).
 * This shader has modifications by Zach Bernal (Chrisknyfe).
 * The refraction feature was modified from code generated by the Godot Engine
 * The fresnel and depth fog features were inspired by the Single Plane Water Shader tutorial by StayAtHomeDev
 * The Ocean class's mesh generation was inspired by the Making An Infinite Ocean tutorial by StayAtHomeDev

# Resources
[GPU Gems](https://developer.nvidia.com/gpugems/gpugems/part-i-natural-effects/chapter-1-effective-water-simulation-physical-models)
[Tom's Original GodotWater](https://gitlab.com/MrMinimal/GodotWater)
[Wind Waker Ocean Graphics Analysis](https://medium.com/@gordonnl/the-ocean-170fdfd659f1)
[Single Plane Water Shader in Godot 4](https://stayathomedev.com/tutorials/single-plane-water-shader/)
[Making An Infinite Ocean in Godot 4](https://stayathomedev.com/tutorials/making-an-infinite-ocean-in-godot-4/)
